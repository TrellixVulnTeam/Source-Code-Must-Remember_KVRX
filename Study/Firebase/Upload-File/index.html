<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        img {
            width: 300px;
            height: 300px;
        }
    </style>
</head>

<body>
    <input type="file" id = "photo" multiple>
    <img id = "image" >
    <button onclick = "uploadImage()">Upload</button>
    <button onclick = "downloadImage()">Download</button>



    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-storage.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-analytics.js"></script>

    <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
    apiKey: "AIzaSyDwnwMmmvonsZ5joNglQpLIuTBk2QIPoD4",
    authDomain: "learn-firebase-41f4d.firebaseapp.com",
    projectId: "learn-firebase-41f4d",
    storageBucket: "learn-firebase-41f4d.appspot.com",
    messagingSenderId: "634277826979",
    appId: "1:634277826979:web:185af943c21e60a2250a16",
    measurementId: "G-6XCVR8YQ48"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    </script>

    <script>
        function uploadImage() {
            //Tao bien tham chieu den storage
            const ref = firebase.storage().ref();
            
            //Tao bien lay file upload qua input
            const file = document.getElementById('photo').files;
            const fileArray = Object.values(file);
            console.log(fileArray);
            // //Tao name khi upload len firebase
            // const name = new Date() + '-' + file.name;

            // //config kieu du lieu uplen firebase
            // const metadata = {
            //     contentType: file.type
            // }

            // // //upload len firebase
            // ref.child(`images/${name}`).put(file, metadata)
            //     .then(snapshot => snapshot.ref.getDownloadURL())
            //     .then(url => {
            //         console.log(url);
            //         alert('Upload thanh cong')
            //         document.getElementById('image').src = url;
            //     })
        }

            //Download anh tu firebase
        function downloadImage() {
            const ref = firebase.storage().ref();
            ref.child(`images/Tue Jan 19 2021 21:31:53 GMT+0700 (Indochina Time)-Wallpaper.jpg`).getDownloadURL()
                .then(url => {
                    document.getElementById('image').src = url;
            })
        }

    </script>
</body>
</html>